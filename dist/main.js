(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var i=t.g.document;if(!e&&i&&(i.currentScript&&(e=i.currentScript.src),!e)){var o=i.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();var e=function(){function t(t){var e=this;this.game=t,this.paths={loadingWrapper:void 0},this.processing=0,this.lazyProcessing=0,this.percentage=void 0,this.loadingDrawParametrs={bottom:t.windowSize.height-t.windowSize.height/100*17,width:t.windowSize.width/100*80,left:t.windowSize.width/100*10,lineThickness:10,lineWidth:.5},this.defaultLoaders=[function(){return e.game.loadImages("./images/osake.jpg","osake")},function(){return e.game.loadImages("./images/yaponiaLocation.jpg","yaponiaLocation")},function(){return e.game.loadImages("./images/laBoca.jpg","laBoca")},function(){return e.game.loadImages("./images/locationArgentine.jpg","locationArgentine")},function(){return e.game.loadImages("./images/buaneAres.jpg","buaneAres")},function(){return e.game.loadImages("./images/arkaTriumfa.jpg","arkaTriumfa")},function(){return e.game.loadImages("./images/soborParish.jpg","soborParish")},function(){return e.game.loadImages("./images/sea.jpg","redSeaBg")},function(){return e.game.loadImages("./images/giza.jpg","gizaBg")},function(){return e.game.loadImages("./images/check.png","check")},function(){return e.game.loadImages("./images/checkGreen.png","checkGreen")},function(){return e.game.loadImages("./images/search.png","searchIcon")},function(){return e.game.loadImages("./images/question.png","questoin")},function(){return e.game.loadImages("./images/franceLocal.jpg","locationFrance")},function(){return e.game.loadImages("./images/egipetLocal.jpg","locationEgipet")},function(){return e.game.loadImages("./images/bigSfinxBg.svg","bigSfinxBg")},function(){return e.game.loadImages("./images/lock.svg","lockIcon")}]}return t.prototype.init=function(t){void 0===t&&(t=this.defaultLoaders),this.game.setBackground("mainBg",!0),this.percentage=this.loadingDrawParametrs.width/100,this.loading(t),this.paintLoading(),this.loadingLoop()},t.prototype.loading=function(t){var e=this,i=100/t.length;Promise.all(t.map((function(t){return t().then((function(){return e.processing+=i}))})))},t.prototype.paintLoading=function(){if(!this.paths.loadingWrapper){var t=this.loadingDrawParametrs,e=t.left,i=t.bottom,o=t.width,n=t.lineThickness;this.paths.loadingWrapper=this.CreateRectangleBorderRadius(e,i,o,n)}this.paintDrawLoadingWrapper(),this.paintLoadingProcess()},t.prototype.loadingLoop=function(){var t=this;if(this.lazyProcessing<this.processing&&(this.lazyProcessing+=.6),this.paintLoadingProcess(),this.lazyProcessing>=100)return this.game.setStatus("globalMenu");requestAnimationFrame((function(){return t.loadingLoop()}))},t.prototype.paintLoadingProcess=function(){if(!(this.processing<1)){var t=this.loadingDrawParametrs,e=t.left,i=t.bottom,o=t.lineThickness,n=t.lineWidth,a=this.game.mainContext,r=this.lazyProcessing*this.percentage,s=this.CreateRectangleBorderRadius(e,i,r,o-n-.5);a.beginPath(),a.fillStyle="#aebacd",a.fill(s)}},t.prototype.paintDrawLoadingWrapper=function(){var t=this.game.mainContext;t.beginPath(),t.fillStyle="#09082f",t.strokeStyle="#fff",t.lineWidth=this.loadingDrawParametrs.lineWidth,t.fill(this.paths.loadingWrapper),t.stroke(this.paths.loadingWrapper)},t.prototype.CreateRectangleBorderRadius=function(t,e,i,o){var n=new Path2D,a=o/2;return n.moveTo(t,e),n.quadraticCurveTo(t,e-a,t+a,e-a),n.lineTo(t+i-a,e-a),n.quadraticCurveTo(t+i,e-a,t+i,e),n.quadraticCurveTo(t+i,e+a,t+i-a,e+a),n.lineTo(t+a,e+a),n.quadraticCurveTo(t,e+a,t,e),n.closePath(),n},t}();const i=function(){function t(t){this.game=t,this.buttonPlayGradient=void 0,this.levelInfoGradient=void 0,this.locationParams={x:0,y:0,r:0,width:40,height:40},this.textPlayParametrs={bottom:0,left:0,fs:0},this.locationImg=void 0,this.paths={playButton:void 0,levelInfo:void 0,locationIcon:void 0},this.paintLevelCount=null,this.mainClick=this.mainClick.bind(this),this.menuMouseMove=this.menuMouseMove.bind(this)}return t.prototype.init=function(){this.game.clearMainCanvas(),this.game.setBackground("mainBg",!0),this.paths.playButton||(this.paths.playButton=this.createPathButtonPlay()),this.paths.levelInfo||(this.paths.levelInfo=this.createPathLevelInfo()),this.paths.locationIcon||(this.paths.locationIcon=this.createPathLocation()),this.game.screenWrapper.addEventListener("click",this.mainClick),this.game.screenWrapper.addEventListener("mousemove",this.menuMouseMove),this.menuLoop()},t.prototype.menuMouseMove=function(t){for(var e=this.game,i=e.mainContext,o=e.screenWrapper,n=this.game.getCursorPosition(t),a=n.x,r=n.y,s=0,l=Object.entries(this.paths);s<l.length;s++){var h=l[s],c=(h[0],h[1]);if(i.isPointInPath(c,a,r)){o.style.cursor="pointer";break}o.style.cursor="default"}},t.prototype.mainClick=function(t){for(var e=t.offsetX,i=t.offsetY,o=this.game.mainContext,n=0,a=Object.entries(this.paths);n<a.length;n++){var r=a[n],s=r[0],l=r[1],h=s+"OnClick";o.isPointInPath(l,e,i)&&this[h]()}},t.prototype.locationIconOnClick=function(){this.game.setStatus("location")},t.prototype.playButtonOnClick=function(){this.game.screenWrapper.style.cursor="default",this.game.setStatus("game")},t.prototype.menuLoop=function(){var t=this;if("globalMenu"!==this.game.status){var e=this.game.screenWrapper;return e.removeEventListener("click",this.mainClick),void e.removeEventListener("mousemove",this.menuMouseMove)}this.game.clearMainCanvas(),this.paintButtonPlay(),this.paintLevelInfo(),this.paintLocation(),requestAnimationFrame((function(){return t.menuLoop()}))},t.prototype.paintButtonPlay=function(){var t=this.game.mainContext,e=this.textPlayParametrs,i=e.left,o=e.bottom,n=e.fs;t.beginPath(),t.fillStyle=this.buttonPlayGradient,t.fill(this.paths.playButton),t.beginPath(),t.font="500 "+n+"px Roboto",t.textBaseline="middle",t.textAlign="center",t.fillStyle="#fff",t.fillText("ИГРАТЬ",i,o)},t.prototype.createPathButtonPlay=function(){var t=this.game.windowSize,e=t.width,i=t.height,o=this.game.minMax(e/100*60,300,550),n=e/2-o/2,a=this.game.minMax(i/100*10,45,55),r=i/100*70,s=a/2,l=new Path2D;this.textPlayParametrs.bottom=r+4,this.textPlayParametrs.left=e/2,this.textPlayParametrs.fs=a-25,l.moveTo(n,r),l.quadraticCurveTo(n,r-s,n+s,r-s),l.lineTo(n+o-s,r-s),l.quadraticCurveTo(n+o,r-s,n+o,r),l.quadraticCurveTo(n+o,r+s,n+o-s,r+s),l.lineTo(n+s,r+s),l.quadraticCurveTo(n,r+s,n,r);var h=this.game.mainContext.createLinearGradient(n,r,n+o,r);return h.addColorStop(0,"#f46a49"),h.addColorStop(1,"#f652a8"),this.buttonPlayGradient=h,l},t.prototype.createPathLevelInfo=function(){var t=this,e=new Path2D,i=this.game.mainContext,o=this.game.windowSize,n=o.width,a=o.height,r=this.game.minMax(Math.min(n,a)/100*10,100,140),s=n/2,l=a/100*45,h=i.createLinearGradient(s+r,l-r,s+r,l+r);return h.addColorStop(0,"#697af3"),h.addColorStop(1,"#7d42d1"),this.levelInfoGradient=h,e.arc(s,l,r,0,2*Math.PI),this.paintLevelCount=function(){i.fillStyle="#fff",i.textBaseline="middle",i.textAlign="center",i.fillText(String(t.game.user.levelCount+1),s,l)},e},t.prototype.createPathLocation=function(){var t=new Path2D,e=this.game.windowSize.width-60;return t.arc(e+20,40,20,0,2*Math.PI),this.locationParams.x=e,this.locationParams.y=20,this.locationParams.r=20,this.locationImg=new Image(this.locationParams.width,this.locationParams.height),this.locationImg.src="./images/location.png",t},t.prototype.paintLocation=function(){var t=this.game.mainContext,e=this.locationParams,i=e.x,o=e.y,n=e.width,a=e.height,r=this.locationImg;t.beginPath(),t.fillStyle="transparent",t.fill(this.paths.locationIcon),t.beginPath(),t.drawImage(r,i,o,n,a)},t.prototype.paintLevelInfo=function(){var t=this.paths.levelInfo,e=this.game.mainContext;e.save(),e.beginPath(),e.shadowColor="#f8f9d6",e.shadowBlur=50,e.fillStyle=this.levelInfoGradient,e.fill(t),e.restore(),this.paintLevelCount()},t}(),o=function(){function t(t){this.game=t,this.title=null,this.levels=t.user.levels,this.levelData=null,this.map=null,this.headingData={height:50,headingTextData:this.game.minMax(this.game.windowSize.width/100*3,18,24)+"px Roboto",backIcon:{width:15,height:25,lineWidth:6}},this.backPath=null,this.tableOtions=null,this.enteredTeextData=null,this.temporaryWord="",this.inputLetters=[],this.historyAddLetter=[],this.preDone=!1,this.letterTransformK=0,this.mouseMove=this.mouseMove.bind(this),this.click=this.click.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.mouseUp=this.mouseUp.bind(this)}return t.prototype.mouseMove=function(t){var e=this.game.getCursorPosition(t),i=e.x,o=e.y,n=this.game.mainContext,a=this.letterPaths.find((function(t){return n.isPointInPath(t.path,i,o)})),r=this.game.screenWrapper;if(this.inputLetters.length&&(this.mouseData={x:i,y:o},a)){if(!a.isSelect)return a.isSelect=!0,this.temporaryWord+=a.letter,this.inputLetters.push({x:a.x,y:a.y}),this.historyAddLetter.push(a);a===this.historyAddLetter[this.historyAddLetter.length-2]&&(this.inputLetters.pop(),this.historyAddLetter.pop().isSelect=!1,this.temporaryWord=this.temporaryWord.slice(0,-1))}return a||n.isPointInStroke(this.backPath,i,o)?r.style.cursor="pointer":r.style.cursor="default"},t.prototype.click=function(t){var e=this.game.getCursorPosition(t),i=e.x,o=e.y;this.game.mainContext.isPointInStroke(this.backPath,i,o)&&(this.clearStage(),this.game.setStatus("globalMenu"))},t.prototype.checkWordInTable=function(){var t=this,e=this.temporaryWord,i=this.levelData.keyData[e];if(i){var o=i.direction,n=i.col,a=i.row,r=e.split("");if(i.selected=!0,"down"===o&&r.forEach((function(e,i){return t.map[a+i][n]=e})),"right"===o&&r.forEach((function(e,i){return t.map[a][n+i]=e})),Object.values(this.levelData.keyData).every((function(t){return t.selected})))return this.preDone=!0}},t.prototype.passed=function(){var t=this,e=this.game,i=e.mainContext,o=e.windowSize,n=o.width,a=o.height,r="ВЕЛИКОЛЕПНО";i.beginPath(),i.fillStyle="#cd2b58",i.fillRect(0,(a-50)/2,n,50),i.fillStyle="#fff",i.textAlign="center",i.textBaseline="middle",i.font="bold 22px Roboto";var s=i.measureText(r).width,l=this.letterTransformK+=.15,h=r.split(""),c=(n-s-h.length*l)/2;h.forEach((function(t,e){i.fillText(t,c+15*e+l*e,a/2)})),l>15&&(this.clearStage(),setTimeout((function(){t.game.setStatus("endOfLevel")}),750))},t.prototype.clearStage=function(){cancelAnimationFrame(this.requestId),document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("click",this.click),document.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("mouseup",this.mouseUp)},t.prototype.onMouseDown=function(t){var e=this.game.getCursorPosition(t),i=e.x,o=e.y,n=this.game.mainContext,a=this.letterPaths.find((function(t){return n.isPointInPath(t.path,i,o)}));a&&(this.historyAddLetter.push(a),this.inputLetters.push({x:a.x,y:a.y}),a.isSelect=!0,this.temporaryWord=a.letter,this.mouseData={x:i,y:o})},t.prototype.init=function(){this.preDone=!1,this.setDataGame(),this.setParamsTableOptions(),this.setEnteredTeextData(),this.initArcData(),this.loop(),document.addEventListener("mousemove",this.mouseMove),document.addEventListener("click",this.click),document.addEventListener("mousedown",this.onMouseDown),document.addEventListener("mouseup",this.mouseUp)},t.prototype.mouseUp=function(){this.checkWordInTable(),this.inputLetters=[],this.letterPaths.forEach((function(t,e,i){return i[e].isSelect=!1})),this.historyAddLetter=[],this.temporaryWord=""},t.prototype.paintLine=function(){var t=this.game.mainContext,e=this.mouseData,i=e.x,o=e.y;t.beginPath(),t.strokeStyle="#e42e61",t.lineWidth=7,this.inputLetters.forEach((function(e){var i=e.x,o=e.y;t.lineTo(i,o)})),t.lineTo(i,o),t.stroke()},t.prototype.paintArcLetters=function(){var t=this.arcData,e=t.cy,i=t.cx,o=(t.width,t.height,t.r),n=(t.insideRadius,t.letterStep,t.insideFs),a=this.game.mainContext;a.beginPath(),a.shadowBlur=5,a.shadowColor="#9ba1b7",a.fillStyle="#d9dbe0cf",a.arc(i,e,o,0,2*Math.PI),a.fill(),a.shadowBlur=0,this.inputLetters.length&&this.paintLine(),this.letterPaths.map((function(t){var e=t.letter,i=t.path,o=t.x,r=t.y,s=t.isSelect;s&&(a.fillStyle="#e42e61",a.fill(i)),a.font="bold "+n+"px Roboto",a.fillStyle=s?"#fff":"#18416a",a.fillText(e,o,r+.1*n),a.beginPath()}))},t.prototype.initArcData=function(){var t=this.game.windowSize,e=t.width,i=t.height,o=(this.game.mainContext,this.game.minMax),n=Math.min(o(e/100*80,250,900),o(i/100*40,250,500)),a=this.enteredTeextData.y+this.enteredTeextData.height+15,r=n/2,s=r/4,l=(e-n)/2+r,h=a+r,c=r-15-s/2,d=2*Math.PI/this.levelData.letters.length;this.arcData={width:n,height:n,r,letterSpace:0,cx:l,cy:h,y:a,insideFs:s,insideRadius:c,letterStep:d},this.letterPaths=this.levelData.letters.map((function(t,e){var i=new Path2D,o=l+c*Math.sin(e*d),n=h+c*Math.cos(e*d);return i.arc(o,n,s,0,2*Math.PI),{letter:t,path:i,x:o,y:n,isSelect:!1}}))},t.prototype.loop=function(){var t=this;this.requestId=requestAnimationFrame((function(){return t.loop()})),this.game.clearMainCanvas(),this.paintHeading(),this.paintGrid(),this.paintArcLetters(),this.temporaryWord.length&&this.paintInputsWord(),this.preDone&&this.passed()},t.prototype.setEnteredTeextData=function(){var t=this.tableOtions,e=t.height,i=t.y;this.enteredTeextData={outside:20,height:30,y:i+e+20}},t.prototype.setDataGame=function(){var t=this.game.user,e=this.levels.countries,i=t.levelData,o=i.countries,n=i.sights,a=i.playId,r=e[o].sights[n].handler;this.letterTransformK=0,this.title=r.heading,this.bgImageId=r.img,this.levelData=e[o].sights[n].levels[a],this.map=this.createKeysMap(),this.game.setBackground(this.bgImageId)},t.prototype.setParamsTableOptions=function(){var t=this.game.minMax,e=this.map,i=this.game.windowSize,o=i.width,n=i.height,a=e.length,r=e[0].length,s=Math.min(t(o/100*80,250,900),t(n/100*40,250,500)),l=Math.max(a,r),h=(s-4*(l-1))/l,c=h*r+4*(r-1),d=h*a+4*(a-1);this.tableOtions={rowCount:a,colCount:r,width:c,height:d,x:(o-c)/2,y:this.headingData.height+25,gap:4,cellSize:h,borderRadius:5}},t.prototype.paintGrid=function(){var t=this.tableOtions,e=t.x,i=t.y,o=t.rowCount,n=t.colCount,a=t.cellSize,r=t.gap,s=t.borderRadius,l=this.game.mainContext,h=this.map;l.beginPath(),l.font=a/1.6+"px Roboto";for(var c=0;c<o;c++)for(var d=0;d<n;d++){var u=e+a*d+r*d,g=i+a*c+r*c,m=h[c][d];if(l.shadowBlur=2,l.shadowColor="#b1adad59",m&&"boolean"==typeof m){l.fillStyle="#ebe9e9";var p=this.game.createRect(u,g,a,a,s);l.fill(p)}"string"==typeof m&&(l.fillStyle="#e42e61",p=this.game.createRect(u,g,a,a,s),l.fill(p),l.shadowBlur=0,l.fillStyle="#ebe9e9",l.fillText(m,u+a/2,g+a/1.8))}},t.prototype.paintInputsWord=function(){var t=this.game.mainContext,e=this.game.windowSize.width,i=this.enteredTeextData,o=i.height,n=i.y,a=this.temporaryWord;t.font="bold "+.8*o+"px Roboto";var r=t.measureText(a).width;t.fillStyle="#d72a46",t.fill(this.game.createRect((e-r)/2-14,n,r+28,o,o/2)),t.fillStyle="#ebe9e9",t.fillText(a,e/2,n+o/2+.06*o)},t.prototype.paintHeading=function(){var t=this.game.mainContext,e=this.headingData,i=e.height,o=e.headingTextData,n=this.game.windowSize.width;if(!this.backPath){var a=new Path2D,r=this.headingData.backIcon,s=r.width,l=r.height,h=r.lineWidth,c=(i-l)/2;t.lineWidth=h,a.moveTo(30+s,c),a.lineTo(30,c+l/2),a.lineTo(30+s,c+l),this.backPath=a}t.lineCap="round",t.strokeStyle="#fff",t.stroke(this.backPath),t.font=o,t.textBaseline="middle",t.textAlign="center",t.fillStyle="#fff",t.fillText(this.title+" ● "+(this.game.user.levelCount+1),n/2,i/2)},t.prototype.createKeysMap=function(){var t=this.levelData.keyData,e=null,i=Object.entries(t),o=[1],n=[1];return i.forEach((function(t){var e=t[0],i=t[1];"down"===i.direction&&o.push(i.row+e.length),"right"===i.direction&&n.push(i.col+e.length)})),e=Array(Math.max.apply(Math,o)).fill(0).map((function(){return Array(Math.max.apply(Math,n)).fill(!1)})),i.forEach((function(t){var i=t[0],o=t[1],n=o.direction,a=o.row,r=o.col;if("down"==n)for(var s=a,l=a+i.length,h=s;h<l;h++)e[h][r]=!0;if("right"==n){s=r,l=r+i.length;for(var c=s;c<l;c++)e[a][c]=!0}})),e},t}(),n=function(){function t(t){this.game=t,this.headingGradient=void 0,this.animateFrameId=void 0,this.headingHeight=60,this.backPath=void 0,this.fullHeightLevels=void 0,this.scrolTop=0,this.eventStore=[],this.sectionStatusIcons={done:"check",process:"searchIcon",block:"lockIcon"},this.cardSize={width:this.game.minMax(300,this.game.windowSize.width/100*50,500),height:250},this.cursorPosition={x:0,y:0},this.locationActivePaths=[],this.cardBottomPadding=15,this.heightVisibleDivision=this.game.windowSize.height-this.headingHeight,this.mouseMove=this.mouseMove.bind(this),this.click=this.click.bind(this),this.scrollLocationCard=this.scrollLocationCard.bind(this)}return t.prototype.fillBackground=function(){var t=this.game,e=t.backgroundContext,i=t.windowSize,o=i.width,n=i.height;e.beginPath(),e.fillStyle="#606fe4",e.fillRect(0,0,o,n)},t.prototype.paintHeader=function(){var t=this.game.mainContext,e=this.headingHeight,i=this.game.windowSize.width;t.save(),t.beginPath(),t.fillStyle=this.headingGradient,t.shadowColor="#3a4c8d",t.shadowOffsetY=0,t.shadowBlur=15,t.fillRect(0,0,i,e),t.font="500 24px Roboto",t.textBaseline="middle",t.textAlign="center",t.fillStyle="#fff",t.fillText("ИССЛЕДОВАТЬ",this.game.windowSize.width/2,this.headingHeight/2),t.beginPath(),t.lineWidth=5,t.lineCap="round",t.strokeStyle="#fff",t.stroke(this.backPath),t.restore()},t.prototype.createBackPath=function(){var t=new Path2D;return this.game.mainContext.lineWidth=7,t.moveTo(35,15),t.lineTo(20,30),t.lineTo(35,45),t},t.prototype.mouseMove=function(t){var e=this.game.getCursorPosition(t),i=e.x,o=e.y;this.cursorPosition.x=i,this.cursorPosition.y=o},t.prototype.click=function(t){var e=this.game.getCursorPosition(t),i=e.x,o=e.y,n=this.game.mainContext;if(n.isPointInStroke(this.backPath,i,o))return cancelAnimationFrame(this.animateFrameId),this.clearEventListeners(),this.game.setStatus("globalMenu");var a=this.eventStore.filter((function(t){return n.isPointInPath(t.path,i,o)})).shift();null==a||a.handler()},t.prototype.scrollLocationCard=function(t){if(this.scrolTop+=t.deltaY/7,this.scrolTop>0)return this.scrolTop=0;var e=this.fullHeightLevels-(window.innerHeight-this.headingHeight);e<Math.abs(this.scrolTop)&&(this.scrolTop=-e)},t.prototype.clearEventListeners=function(){this.eventStore=[];var t=this.game.screenWrapper;t.removeEventListener("mousemove",this.mouseMove),t.removeEventListener("click",this.click),t.style.cursor="default"},t.prototype.checkPathInCursorPosition=function(t,e){var i=this.game.mainContext,o=this.game.screenWrapper;return i.isPointInStroke(this.backPath,t,e)||this.eventStore.some((function(o){return i.isPointInPath(o.path,t,e)}))?o.style.cursor="pointer":void(o.style.cursor="default")},t.prototype.locationLoop=function(){var t=this;this.eventStore=[],this.game.clearMainCanvas(),this.getVisibleCard(),this.paintHeader(),this.checkPathInCursorPosition(this.cursorPosition.x,this.cursorPosition.y),this.animateFrameId=requestAnimationFrame((function(){return t.locationLoop()}))},t.prototype.getVisibleCard=function(){var t=this,e=this.scrolTop,i=this.headingHeight,o=this.cardBottomPadding,n=this.cardSize.height,a=this.game.user.levels.countries,r=-n+i,s=window.innerHeight,l=(this.game.windowSize.width-this.cardSize.width)/2;a.reduce((function(e,a,h){var c=e+(h?n+o:i)+5;return c>s||c<r||t.paintCard(c,l,n,a),c}),e)},t.prototype.paintCard=function(t,e,i,o){var n=this,a=this.game.mainContext,r=this.cardSize.width,s=this.game.createRect(e,t,r,i,15),l="block"===o.status,h=l?"НЕ ИЗУЧЕНО":o.country;a.save(),a.beginPath(),a.clip(s),a.drawImage(this.game.imagesStore[o.imageName],e,t,r,i),l&&(a.fillStyle="#535353e6",a.fillRect(0,0,this.game.windowSize.width,this.game.windowSize.height),a.drawImage(this.game.imagesStore.questoin,e+r/2-30,t+i/2-40,60,80)),l||this.paintSections(t,e+10,o),a.fillStyle="#fff",a.font="22px roboto",a.textBaseline="bottom",a.textAlign="left",a.fillText(h,e+20,t+i-10),"done"===o.status&&a.drawImage(this.game.imagesStore.checkGreen,e+r-10-30,t+i-10-30,30,30),"process"===o.status&&this.eventStore.push({path:s,handler:function(){cancelAnimationFrame(n.animateFrameId),n.clearEventListeners(),n.game.setStatus("game")}}),a.restore()},t.prototype.paintSections=function(t,e,i){var o=this,n=this.game.mainContext,a=this.sectionStatusIcons;n.font="11px roboto",n.textAlign="left",n.textBaseline="middle",i.sights.reduce((function(t,i){var r=o.game.createRect(e+10,t,130,25,12.5);n.fillStyle="#ea5c01",n.fill(r),n.fillStyle="#fff",n.fillText(i.title,e+10+10,t+12.5,90);var s=o.game.imagesStore[a[i.status]];return n.drawImage(s,e+10+130-12-10,t+6.5,12,12),o.eventStore.push({path:r,handler:o.handlerSectionClick(i)}),t+25+10}),t+20)},t.prototype.handlerSectionClick=function(t){var e=this,i=t.status,o=t.handler;return function(){"block"!==i&&(cancelAnimationFrame(e.animateFrameId),e.clearEventListeners(),e.game.setStatus("process"===i?"game":"investigated",o))}},t.prototype.init=function(){if(this.fillBackground(),!this.headingGradient){var t=this.game.mainContext.createLinearGradient(0,0,0,this.headingHeight);t.addColorStop(0,"#6571dd"),t.addColorStop(1,"#394d90"),this.headingGradient=t}this.fullHeightLevels||(this.fullHeightLevels=this.game.user.levels.countries.length*(this.cardSize.height+20)),this.backPath||(this.backPath=this.createBackPath()),this.game.screenWrapper.addEventListener("mousemove",this.mouseMove),this.game.screenWrapper.addEventListener("click",this.click),document.addEventListener("wheel",this.scrollLocationCard),this.locationLoop()},t}(),a=function(){function t(t){this.game=t,this.imageBg=null,this.backPath=null,this.mouseMoveHandler=this.mouseMoveHandler.bind(this),this.goBack=this.goBack.bind(this)}return t.prototype.init=function(t){var e=t.img,i=t.heading,o=t.description;this.imageBg=this.game.imagesStore[e],this.heading=i,this.description=o,this.game.setBackground("gizaBg"),this.game.clearMainCanvas(),this.drawText(),this.drawArrow(),document.addEventListener("mousemove",this.mouseMoveHandler),document.addEventListener("click",this.goBack)},t.prototype.goBack=function(t){var e=this.game.getCursorPosition(t),i=e.x,o=e.y;this.game.mainContext.isPointInStroke(this.backPath,i,o)&&(this.clearEvents(),this.game.setStatus("location"))},t.prototype.clearEvents=function(){document.removeEventListener("click",this.goBack),document.removeEventListener("mousemove",this.mouseMoveHandler)},t.prototype.mouseMoveHandler=function(t){var e=this.game.getCursorPosition(t),i=e.x,o=e.y,n=this.game.mainContext,a=this.game.screenWrapper;if(n.isPointInStroke(this.backPath,i,o))return a.style.cursor="pointer";a.style.cursor="default"},t.prototype.drawText=function(){var t=this.game.mainContext,e=this.heading,i=this.description,o=this.game.windowSize,n=o.height,a=o.width,r=n/100,s=a/2,l=a/100*85,h=this.game.minMax(a/100*5,28,48),c=this.game.minMax(a/100*3,18,34);t.save(),t.shadowColor="#000",t.shadowBlur=5,t.textAlign="center",t.textBaseline="middle",t.fillStyle="#fff",t.font=h+"px Roboto",t.fillText(e,s,80*r,l),t.font=c+"px Roboto";var d=this.separationTextInStroke(i),u=d.lines,g=d.lineHeight;u.forEach((function(e,i){t.fillText(e,s,85*r+g*i,l)})),t.restore()},t.prototype.drawArrow=function(){var t=new Path2D,e=this.game.mainContext;e.lineWidth=7,e.strokeStyle="#fff",e.lineCap="round",t.moveTo(45,20),t.lineTo(25,35),t.lineTo(45,50),e.stroke(t),this.backPath=t},t.prototype.separationTextInStroke=function(t){var e=this.game.mainContext,i=this.game.windowSize.width/100*90,o=t.split(" "),n=[],a=e.measureText(t),r=a.actualBoundingBoxDescent,s=a.actualBoundingBoxAscent;return o.reduce((function(t,a,r){var s=t+"  "+a;return e.measureText(s).width>i?(n.push(t),a):r===o.length-1?n.push(t):s}),""),{lines:n,lineHeight:r+s}},t}();var r=function(){function t(){this.countries=[{country:"ЕГИПЕТ",imageName:"locationEgipet",status:"process",sights:[{title:"ПИРАМИДЫ ГИЗЫ",status:"process",handlerId:"1",handler:{img:"gizaBg",heading:"ПИРАМИДЫ ГИЗЫ",description:"Пирамиды Гизы - это древние усыпальницы - первое из семи чудес света."},levels:[{keyData:{СОН:{row:0,col:1,direction:"down"},НОС:{row:1,col:0,direction:"right"}},letters:["О","С","Н"]},{keyData:{ВОР:{row:0,col:2,direction:"down"},РОВ:{row:0,col:0,direction:"right"}},letters:["О","Р","В"]},{keyData:{ЛОСЬ:{row:0,col:2,direction:"down"},СОЛЬ:{row:0,col:0,direction:"right"},ОСЬ:{row:3,col:0,direction:"right"}},letters:["Л","О","С","Ь"]},{keyData:{ФАРШ:{row:0,col:1,direction:"down"},ШАРФ:{row:1,col:0,direction:"right"},ШАР:{row:3,col:1,direction:"right"}},letters:["Ф","А","Р","Ш"]}]},{title:"БОЛЬШОЙ СФИНКС",status:"block",handlerId:"2",handler:{img:"bigSfinxBg",heading:"БОЛЬШОЙ СФИНКС",description:"Большой сфинкс на западном берегу Нила в Гизе — древнейшая сохранившаяся на Земле монументальная скульптура."},levels:[{keyData:{ГОЛ:{row:0,col:3,direction:"down"},ЛУГ:{row:0,col:1,direction:"right"},ГУЛ:{row:1,col:0,direction:"down"},УГОЛ:{row:2,col:0,direction:"right"}},letters:["У","Г","О","Л"]},{keyData:{КРАБ:{row:1,col:2,direction:"down"},БРАК:{row:0,col:5,direction:"down"},РЫБАК:{row:4,col:0,direction:"right"},БАК:{row:1,col:0,direction:"right"},РЫБА:{row:2,col:2,direction:"right"}},letters:["Р","Ы","Б","А","К"]},{keyData:{АДРЕС:{row:0,col:3,direction:"down"},СЕРА:{row:0,col:0,direction:"right"},ДАР:{row:1,col:3,direction:"right"},САД:{row:0,col:0,direction:"down"},СРЕДА:{row:3,col:1,direction:"right"}},letters:["А","Д","Р","Е","С"]},{keyData:{ФАЗА:{row:0,col:2,direction:"down"},ФРАЗА:{row:3,col:0,direction:"right"},АРА:{row:1,col:0,direction:"right"},РАЗ:{row:2,col:4,direction:"down"},ФАРА:{row:0,col:2,direction:"right"},АРФА:{row:1,col:0,direction:"down"}},letters:["Ф","Р","А","З","А"]},{keyData:{ЛОТ:{row:0,col:1,direction:"down"},ОТДЕЛ:{row:1,col:1,direction:"right"},ДЕЛО:{row:1,col:3,direction:"down"},ЛЕТО:{row:1,col:5,direction:"down"},ТЕЛО:{row:4,col:0,direction:"right"}},letters:["Т","Е","Л","О","Д"]},{keyData:{ЛАК:{row:0,col:1,direction:"right"},ЛАД:{row:1,col:3,direction:"right"},КЛАД:{row:1,col:0,direction:"down"},КЛАДЬ:{row:0,col:3,direction:"down"},ДАЛЬ:{row:4,col:0,direction:"right"}},letters:["К","Л","А","Д","Ь"]},{keyData:{ДИВАН:{row:0,col:3,direction:"down"},ДВА:{row:0,col:3,direction:"right"},ВИД:{row:2,col:3,direction:"right"},ВИНА:{row:3,col:0,direction:"right"},НИВА:{row:1,col:0,direction:"down"}},letters:["Д","И","В","А","Н"]}]},{title:"КРАСНОЕ МОРЕ",status:"block",handlerId:"3",handler:{img:"redSeaBg",heading:"КРАСНОЕ МОРЕ",description:"Красное море — внутреннее море Индийского океана, расположенное между Аравийским полуостровом и Африкой в тектонической впадине."},levels:[{keyData:{ТЕНОР:{row:0,col:2,direction:"down"},РОТ:{row:0,col:0,direction:"right"},ЕНОТ:{row:1,col:2,direction:"right"},ТОН:{row:2,col:0,direction:"right"},ТРОН:{row:4,col:1,direction:"right"}},letters:["Т","Е","Н","О","Р"]},{keyData:{ШАКАЛ:{row:0,col:2,direction:"down"},ШЛАК:{row:0,col:2,direction:"right"},ШКАЛА:{row:3,col:0,direction:"right"},КАША:{row:1,col:0,direction:"down"},ЛАК:{row:2,col:4,direction:"down"}},letters:["Ш","А","К","А","Л"]}]}]},{country:"ФРАНЦИЯ",imageName:"locationFrance",status:"block",sights:[{title:"ЭЙФЕЛЕВА БАШНЯ",status:"block",handlerId:"4",handler:{img:"locationFrance",heading:"ЭЙФЕЛЕВА БАШНЯ",description:"Эйфелева башня — металлическая башня в центре Парижа, самая узнаваемая его архитектурная достопримечательность."},levels:[{keyData:{ТОРФ:{row:2,col:4,direction:"down"},ТРОН:{row:0,col:2,direction:"down"},ФТОР:{row:2,col:0,direction:"down"},ТОН:{row:0,col:2,direction:"right"},ФРОНТ:{row:2,col:0,direction:"right"},РОТ:{row:5,col:0,direction:"right"},ФОН:{row:5,col:4,direction:"right"}},letters:["Ф","Р","О","Н","Т"]}]},{title:"СОБОР ПАРИЖСКОЙ БОГОМАТЕРИ",status:"block",handlerId:"5",handler:{img:"soborParish",heading:"СОБОР ПАРИЖСКОЙ БОГОМАТЕРИ",description:"Собор Парижской Богоматери — католический храм в центре Парижа, один из символов французской столицы."},levels:[{keyData:{ЯРМО:{row:0,col:1,direction:"down"},РОМ:{row:3,col:0,direction:"down"},ЛОМ:{row:3,col:3,direction:"down"},МОЛЬ:{row:0,col:4,direction:"down"},РОЯЛЬ:{row:3,col:0,direction:"right"},РОЛЬ:{row:1,col:3,direction:"right"},МОР:{row:5,col:3,direction:"right"}},letters:["Р","О","Я","Л","Ь","М"]}]},{title:"ТРИУМФАЛЬНАЯ АРКА",status:"block",handlerId:"6",handler:{img:"arkaTriumfa",heading:"ТРИУМФАЛЬНАЯ АРКА",description:"Триумфальная арка — архитектурный памятник, монументальное сооружение, представляющее собой архитектурно оформленную арку."},levels:[{keyData:{РУЛЕТ:{row:1,col:1,direction:"down"},ЛЕТО:{row:3,col:0,direction:"right"},УТРО:{row:0,col:2,direction:"right"},ТЕЛО:{row:0,col:3,direction:"down"},ОРЕЛ:{row:0,col:5,direction:"down"},РОТ:{row:1,col:5,direction:"right"},ЛОТ:{row:3,col:5,direction:"right"},ТУР:{row:3,col:7,direction:"down"}},letters:["Р","У","Л","Е","Т","О"]}]}]},{country:"АРГЕНТИНА",imageName:"locationArgentine",status:"block",sights:[{title:"БУЭНОС-АЙРЕС",status:"block",handlerId:"7",handler:{img:"buaneAres",heading:"БУЭНОС-АЙРЕС",description:"Буэнос-Айрес - это город, столица Аргентины."},levels:[{keyData:{ЛОТ:{row:3,col:0,direction:"down"},МЕЛ:{row:0,col:3,direction:"down"},ТОМ:{row:0,col:1,direction:"right"},ДЕЛО:{row:2,col:1,direction:"right"},ОТДЕЛ:{row:4,col:0,direction:"right"},ДОМ:{row:4,col:2,direction:"down"},ОМЛЕТ:{row:2,col:4,direction:"down"},МЕТОД:{row:3,col:4,direction:"right"},ТЕЛО:{row:0,col:5,direction:"right"},ЛЕТО:{row:0,col:7,direction:"down"},ДЕМО:{row:3,col:8,direction:"down"},ЛОМ:{row:5,col:6,direction:"right"}},letters:["М","Е","Т","О","Д","Л"]}]},{title:"ЛА-БОКА",status:"block",handlerId:"8",handler:{img:"laBoca",heading:"ЛА-БОКА",description:"Ла-Бока – район, где проживают представители рабочего класса."},levels:[{keyData:{УГАР:{row:4,col:0,direction:"down"},ГАЗ:{row:1,col:0,direction:"right"},РОЗА:{row:7,col:0,direction:"right"},ГРОЗА:{row:5,col:0,direction:"right"},УЗОР:{row:0,col:2,direction:"down"},УГРОЗА:{row:0,col:4,direction:"down"},РОЗГА:{row:2,col:4,direction:"right"},ГОРА:{row:2,col:7,direction:"down"},РАГУ:{row:5,col:6,direction:"right"},РАЗ:{row:5,col:6,direction:"down"},АЗУ:{row:3,col:9,direction:"down"},АРГО:{row:3,col:1,direction:"right"}},letters:["У","Г","Р","О","З","А"]}]}]},{country:"ЯПОНИЯ",imageName:"yaponiaLocation",status:"block",sights:[{title:"ЗАМОК В ОСАКЕ",status:"block",handlerId:"9",handler:{img:"osake",heading:"ЗАМОК В ОСАКЕ",description:"Замок в Осаке — пятиэтажный самурайский замок в городе Осака, Япония, который играл ключевую роль в японской истории конца XVI — начала XVII столетий."},levels:[{keyData:{АИСТ:{row:1,col:0,direction:"right"},СТИХ:{row:3,col:0,direction:"right"},ТИС:{row:3,col:1,direction:"down"},СТИХИЯ:{row:0,col:3,direction:"down"},СТАЯ:{row:0,col:3,direction:"right"},ЯХТА:{row:5,col:3,direction:"right"},ХИТ:{row:3,col:5,direction:"down"}},letters:["С","Т","А","И","Х","И","Я"]}]}]}]}return t.prototype.getLevel=function(t){return this.countries[t]},t}(),s=function(){this.levelCount=0,this.levelData={countries:0,sights:0,playId:0},this.levels=new r};const l=function(){function t(t){this.game=t,this.mouseMove=this.mouseMove.bind(this),this.clickHandler=this.clickHandler.bind(this)}return t.prototype.init=function(){this.paths=[],document.addEventListener("mousemove",this.mouseMove),document.addEventListener("click",this.clickHandler),this.loadProgress=0,this.game.setBackground("mainBg",!0),this.arcData||this.arcSetData(),this.setEndLevelData(),this.loop()},t.prototype.mouseMove=function(t){var e=this.game.getCursorPosition(t),i=e.x,o=e.y,n=this.game.mainContext;this.game.screenWrapper.style.cursor=this.paths.find((function(t){var e=t.path;return n.isPointInPath(e,i,o)}))?"pointer":"default"},t.prototype.clickHandler=function(t){var e,i=this.game.getCursorPosition(t),o=i.x,n=i.y,a=this.game.mainContext;null===(e=this.paths.find((function(t){var e=t.path;return a.isPointInPath(e,o,n)})))||void 0===e||e.callback()},t.prototype.cancelEvents=function(){document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("click",this.clickHandler)},t.prototype.setEndLevelData=function(){var t=this.game.user.levelData,e=t.countries,i=t.sights,o=t.playId,n=this.game.user.levels;this.endLevelData={sightsTitle:n.countries[e].sights[i].title,levelsStart:o,levelsEnd:o+1,levelCount:n.countries[e].sights[i].levels.length,countLevelsDone:this.game.user.levelCount+1}},t.prototype.loop=function(){var t=this;this.requestId=requestAnimationFrame((function(){return t.loop()})),this.game.clearMainCanvas(),this.paintArc(),this.paintInfoBlock()},t.prototype.nextSteep=function(t,e){var i=this,o=this.game,n=o.mainContext,a=(0,o.createRect)(e-125,t,250,45,22.5),r=this.game.mainContext.createLinearGradient(e-125,t,e+125,t+45);r.addColorStop(0,"#f46a49"),r.addColorStop(1,"#f652a8"),n.fillStyle=r,n.fill(a),n.font="18px roboto",n.fillStyle="#fff",n.textBaseline="middle",n.fillText("ДАЛЬШЕ",e,t+22.5),this.paths.push({callback:function(){i.game.nextLevel(),i.cancelEvents(),document.body.style.cursor="default",i.game.setStatus("game")},path:a})},t.prototype.paintInfoBlock=function(){var t=this.game.windowSize,e=t.width,i=(t.height,this.game.mainContext),o=28,n="#3f83be",a=this.game.minMax(e/100*80,260,450),r=35,s=this.game.minMax(e/100*90,300,500),l=this.arcData.endY+30+14,h=e/2,c=s-8,d=this.endLevelData,u=d.sightsTitle,g=d.levelsStart,m=d.levelsEnd,p=(d.countLevelsDone,d.levelCount);i.beginPath(),i.fillStyle=n,i.moveTo(h-(a/2-8),l+o),i.lineTo(h-14,l+o),i.lineTo(h+a/2-8,l+o),i.quadraticCurveTo(h+a/2,l+o,h+a/2,l+o+8),i.lineTo(h+a/2,l+o+r-8),i.quadraticCurveTo(h+a/2,l+o+r,h+a/2+8,l+o+r),i.lineTo(h+s/2,l+o+r),i.lineTo(h+s/2,l+o+r+30),i.lineTo(h-(s/2-15),l+o+r+30),i.quadraticCurveTo(h-s/2,l+o+r+30,h-s/2,l+o+r+15),i.quadraticCurveTo(h-s/2,l+o+r,h-(s/2-15),l+o+r),i.quadraticCurveTo(h-a/2,l+o+r,h-a/2,l+o+r-8),i.lineTo(h-a/2,l+o+8),i.quadraticCurveTo(h-a/2,l+o,h-(a/2-8),l+o),i.moveTo(h,l+36.4),i.arc(h,l+36.4,o,Math.PI,0),i.fill(),i.beginPath(),i.fillStyle="#36658e";var f=this.game.createRect(h-a/2+5,l+o+5,a-10,25,5);i.fill(f),i.fillStyle="#fff",i.textBaseline="middle",i.textAlign="center",i.font="400 "+25*.55+"px roboto",i.fillText(u,h,l+o+5+25*.55),i.textBaseline="bottom",i.font="400 12.6px roboto",i.fillText(this.endLevelData.levelsEnd+"/"+this.endLevelData.levelCount,h,l+o-0),i.beginPath(),i.fillStyle="#444a73";var v=this.game.createRect(h-(s/2-4),l+o+r+4,c,22,11);i.fill(v),i.beginPath(),i.fillStyle="#52f54e";var w=c/p*g+this.loadProgress,y=c/p*m,x=this.game.createRect(h-(s/2-4),l+o+r+4,w,22,11);i.fill(x),i.beginPath(),i.fillStyle=n,i.arc(h+s/2-4,l+o+r+15-4,19,2*Math.PI,0),i.fill(),w<=y?this.loadProgress+=4:(this.nextSteep(25+l+o+r+30,h),cancelAnimationFrame(this.requestId))},t.prototype.arcSetData=function(){var t=this.game.windowSize,e=t.width,i=t.height,o=Math.min(e,i)/100*15,n=i/100*20+o,a=this.game.mainContext.createLinearGradient(0,0,e,i);a.addColorStop(0,"#697af3"),a.addColorStop(1,"#7d42d1"),this.arcData={x:e/2,y:n,radius:o,gradient:a,endY:n+o}},t.prototype.paintArc=function(){var t=this.game.mainContext,e=this.arcData,i=e.x,o=e.y,n=e.radius,a=e.gradient;t.beginPath(),t.fillStyle=a,t.arc(i,o,n,0,2*Math.PI),t.fill(),t.fillStyle="#fff",t.font=.28*n+"px Roboto",t.textAlign="center",t.textBaseline="middle",t.fillText(String(this.game.user.levelCount+1),i,o)},t}();var h=function(){function t(){this.canvasBackground=void 0,this.screenWrapper=void 0,this.investigated=void 0,this.canvasMain=void 0,this.backgroundContext=void 0,this.mainContext=void 0,this.location=void 0,this.user=void 0,this.windowSize={width:0,height:0},this.imagesStore={},this.status="loadingTheGame",this.loadingGameStages=void 0,this.globalMenu=void 0}return t.prototype.init=function(){this.canvasBackground=document.querySelector("#canvas-bg"),this.canvasMain=document.querySelector("#canvas-main"),this.backgroundContext=this.canvasBackground.getContext("2d"),this.mainContext=this.canvasMain.getContext("2d"),this.screenWrapper=document.querySelector(".screen"),this.investigated=new a(this),this.endOfLevel=new l(this),this.initUser(),this.setFullSize(),this.loadingGameStages=new e(this),this.globalMenu=new i(this),this.location=new n(this),this.gamePlay=new o(this),this.paintPreloader()},t.prototype.paintPreloader=function(){var t=this,e=this.backgroundContext,i=this.windowSize,o=i.width,n=i.height;e.fillStyle="#ff9800",e.fillRect(0,0,o,n),e.font=this.minMax(o/20,24,38)+"px cursive",e.textBaseline="middle",e.textAlign="center",e.fillStyle="#fff",e.fillText("VITALIYEB GAMES",o/2,n/2),Promise.all([this.loadImages("./images/loadingBg.jpg","mainBg"),new Promise((function(t,e){return setTimeout(t,1e3)}))]).then((function(){return t.runInitScene()}))},t.prototype.setStatus=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.status=t,this.runInitScene(e)},t.prototype.setFullSize=function(){var t=document.querySelector(".screen"),e=t.clientWidth,i=t.clientHeight;this.windowSize.width=e,this.windowSize.height=i;for(var o=0,n=[this.canvasBackground,this.canvasMain];o<n.length;o++){var a=n[o];a.width=e,a.height=i}},t.prototype.runInitScene=function(t){switch(this.status){case"loadingTheGame":this.loadingGameStages.init();break;case"globalMenu":this.globalMenu.init();break;case"location":this.location.init();break;case"investigated":this.investigated.init(t[0]);break;case"game":this.gamePlay.init();break;case"endOfLevel":this.endOfLevel.init()}},t.prototype.initUser=function(){var t=window.localStorage.getItem("WOW_USER");if(t)return this.user=JSON.parse(t);this.user=new s},t.prototype.clearMainCanvas=function(){var t=this.mainContext;t.beginPath(),t.clearRect(0,0,this.windowSize.width,this.windowSize.height)},t.prototype.loadImages=function(t,e){var i=this,o=new Image(500,500);return new Promise((function(n,a){o.src=t,o.onload=function(){return i.imagesStore[e]=o,n(o)}}))},t.prototype.nextLevel=function(){++this.user.levelData.playId,++this.user.levelCount;var t=this.user,e=t.levelData,i=e.countries,o=e.sights,n=e.playId,a=t.levels.countries;n>=a[i].sights[o].levels.length&&(a[i].sights[o].status="done",t.levelData.playId=0,++t.levelData.sights,++o,a[i].sights[o]&&(a[i].sights[o].status="process")),o>=a[i].sights.length&&(a[i].status="done",t.levelData.sights=0,++t.levelData.countries,a[++i]&&(a[i].sights[0].status="process",a[i].status="process")),i>=a.length-1&&alert("end game"),this.setUserData()},t.prototype.setUserData=function(){var t=this.user;window.localStorage.setItem("WOW_USER",JSON.stringify(t))},t.prototype.createRect=function(t,e,i,o,n){var a=new Path2D;return a.moveTo(t+n,e),a.lineTo(t+i-n,e),a.quadraticCurveTo(t+i,e,t+i,e+n),a.lineTo(t+i,e+o-n),a.quadraticCurveTo(t+i,e+o,t+i-n,e+o),a.lineTo(t+n,e+o),a.quadraticCurveTo(t,e+o,t,e+o-n),a.lineTo(t,e+n),a.quadraticCurveTo(t,e,t+n,e),a},t.prototype.setBackground=function(t,e){return i=this,o=void 0,a=function(){var i,o,n,a,r,s,l;return function(t,e){var i,o,n,a,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((n=(n=r.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){r.label=a[1];break}if(6===a[0]&&r.label<n[1]){r.label=n[1],n=a;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(a);break}n[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(t){a=[6,t],o=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(h){return i=this.backgroundContext,o=this.windowSize,n=o.width,a=o.height,r=this.imagesStore[t],i.drawImage(r,0,0,n,a),e&&(s=n/2,l=a/100*15,i.beginPath(),i.font="500 40px Roboto",i.textBaseline="middle",i.textAlign="center",i.fillStyle="#fff",i.fillText("Words of wonders",s,l)),[2]}))},new((n=void 0)||(n=Promise))((function(t,e){function r(t){try{l(a.next(t))}catch(t){e(t)}}function s(t){try{l(a.throw(t))}catch(t){e(t)}}function l(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(r,s)}l((a=a.apply(i,o||[])).next())}));var i,o,n,a},t.prototype.getCursorPosition=function(t){return{x:t.offsetX,y:t.offsetY}},t.prototype.minMax=function(t,e,i){return t>e&&i>t?t:t>i?i:t<e?e:void 0},t}();window.addEventListener("load",(function(){(new h).init()}),!1),t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p,t.p})();